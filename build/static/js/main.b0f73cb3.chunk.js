(this.webpackJsonptestreact=this.webpackJsonptestreact||[]).push([[0],{31:function(e,t,s){"use strict";s.r(t);var n=s(2),c=s(1),a=s(18),i=s.n(a),r=s(9),o=s(3),l=s(8),j=s.n(l),u=s(11),d=s(0),b=function(e){var t=Object(c.useState)([]),s=Object(n.a)(t,2),a=s[0],i=s[1],r=e.setFeaturedResult,o=e.isLoggedIn,l=(e.setIsLoggedIn,e.clickedMessage,e.userToken),b=Object(c.useState)(""),h=Object(n.a)(b,2),O=(h[0],h[1]),p=Object(c.useState)(""),m=Object(n.a)(p,2),g=m[0],x=m[1];Object(c.useEffect)((function(){console.log("Bearer ",l),fetch("https://strangers-things.herokuapp.com/api/2105-VPI-WEB-PT/users/me",{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(l)}}).then((function(e){return e.json()})).then((function(e){var t=e.data.username;O(t);for(var s=0;s<a.length;s++)a[s].author.username===t&&(a[s].isAuthor=!0)})).catch(console.error),function(){var e=Object(u.a)(j.a.mark((function e(){var t,s,n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://strangers-things.herokuapp.com/api/2105-VPI-WEB-PT/posts");case 2:return t=e.sent,e.next=5,t.json();case 5:s=e.sent,n=s.data.posts,i(n);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}),[o,l]);var f=a.filter((function(e){return function(e,t){if(e.title.toLowerCase().includes(t.toLowerCase()))return!0}(e,g)})),v=g.length>0?f:a;return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("h1",{className:"posttitle",children:"Posts"}),Object(d.jsxs)("div",{className:"SearchEverything",children:[Object(d.jsx)("label",{className:"SearchText",children:"Search Posts"}),Object(d.jsx)("input",{className:"SearchInput",onChange:function(e){return x(e.target.value)}})]}),v.map((function(e){return Object(d.jsxs)("div",{className:"post",onClick:function(t){t.preventDefault(),console.log(e),console.log(e.isAuthor),r(e)},children:[Object(d.jsxs)("div",{className:"title",children:[" Title: ",e.title]}),Object(d.jsxs)("div",{className:"usernamee",children:[" Post By: ",e.author.username]}),Object(d.jsxs)("div",{className:"location",children:[" Location: ",e.location]}),Object(d.jsxs)("div",{className:"description",children:[" Description:  ",e.description," "]})]},e._id)}))]})},h=function(e){var t=e.setIsLoggedIn,s=(e.isLoggedIn,e.userToken,e.setUserToken),a=Object(c.useState)(""),i=Object(n.a)(a,2),r=i[0],o=i[1],l=Object(c.useState)(""),j=Object(n.a)(l,2),u=j[0],b=j[1];return Object(d.jsx)(d.Fragment,{children:Object(d.jsxs)("div",{className:"Login",children:[Object(d.jsx)("h1",{children:"Login"}),Object(d.jsx)("input",{className:"usernameValue",type:"username",value:r,onChange:function(e){o(e.target.value)}}),Object(d.jsx)("input",{className:"passwordValue",type:"password",value:u,onChange:function(e){b(e.target.value)}}),Object(d.jsx)("button",{className:"loginBtn",onClick:function(){var e,n;e=r,n=u,fetch("https://strangers-things.herokuapp.com/api/2105-vpi-web-pt/users/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:{username:e,password:n}})}).then((function(e){return e.json()})).then((function(e){return console.log(e),t(!0),s(e.data.token),localStorage.setItem("token",e.data.token),e})).catch(console.error)},children:"Login"})," ",Object(d.jsx)("br",{}),Object(d.jsx)("br",{})]})})},O=function(e){var t=e.setIsLoggedIn,s=e.setUserToken,a=Object(c.useState)(""),i=Object(n.a)(a,2),r=i[0],o=i[1],l=Object(c.useState)(""),j=Object(n.a)(l,2),u=j[0],b=j[1];return Object(d.jsxs)("div",{className:"Register",children:[Object(d.jsx)("h1",{children:"Register"}),Object(d.jsx)("input",{className:"usernameValue",type:"username",value:r,onChange:function(e){o(e.target.value)}}),Object(d.jsx)("input",{className:"passwordValue",type:"password",value:u,onChange:function(e){b(e.target.value)}}),Object(d.jsx)("button",{className:"registerbtn",onClick:function(){var e,n;e=r,n=u,fetch("https://strangers-things.herokuapp.com/api/2105-vpi-web-pt/users/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:{username:e,password:n}})}).then((function(e){return e.json()})).then((function(e){return e.success&&(t(!0),s(e.data.token),localStorage.setItem("token",e.data.token)),e})).catch(console.error)},children:"Register"})]})},p=function(e){var t=Object(c.useState)(""),s=Object(n.a)(t,2),a=s[0],i=s[1],r=e.renderMessageForm,o=e.recipientUsername,l=e.recipientTitle,j=e.postId,u=localStorage.getItem("token");return Object(d.jsx)(d.Fragment,{children:Object(d.jsxs)("div",{className:"featuredmessageform",children:[Object(d.jsxs)("span",{children:["To:",o,"  "]}),Object(d.jsx)("br",{}),Object(d.jsxs)("span",{children:["In Response to post: ",l," "]}),Object(d.jsx)("br",{}),Object(d.jsx)("br",{}),Object(d.jsx)("span",{children:"Message Body:"}),Object(d.jsx)("br",{}),Object(d.jsx)("input",{onChange:function(e){i(e.target.value),console.log(a)}}),Object(d.jsx)("button",{className:"send",onClick:function(){fetch("https://strangers-things.herokuapp.com/api/2105-VPI-WEB-PT/posts/".concat(j,"/messages"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+u},body:JSON.stringify({message:{content:a}})}).then((function(e){console.log(e)})).catch(console.error),r(!1)},children:"Send"}),Object(d.jsx)("button",{onClick:function(){r(!1)},children:"Cancel"})]})})},m=function(e){var t=e.featuredResult,s=e.setIsLoggedIn,a=e.setUserToken,i=e.clickedMessage,r=e.renderMessageForm,o=Object(c.useState)(""),l=Object(n.a)(o,2),j=l[0],u=l[1],b=Object(c.useState)(""),h=Object(n.a)(b,2),O=h[0],m=h[1],g=Object(c.useState)(""),x=Object(n.a)(g,2),f=x[0],v=x[1],N=Object(c.useState)(""),k=Object(n.a)(N,2);k[0],k[1],localStorage.getItem("token");function S(){s(!1),a(""),localStorage.removeItem("token")}if(!t)return Object(d.jsx)(d.Fragment,{children:Object(d.jsxs)("div",{className:"postdetails",children:[Object(d.jsx)("h1",{children:"Featured Post"}),Object(d.jsx)("span",{className:"clickformore",children:"Click a Post for more info!"}),Object(d.jsx)("button",{className:"logOutinFeaturePost",onClick:function(){S()},children:"LogOut"})]})});t.title,t.price,t.location,t.description,t.willDeliver;return Object(d.jsx)(d.Fragment,{children:Object(d.jsxs)("div",{className:"postdetails",children:[Object(d.jsx)("h1",{children:"Featured Post"}),Object(d.jsxs)("div",{children:[Object(d.jsxs)("div",{className:"featuredtitle",children:[" Title:",t.title," "]}),Object(d.jsxs)("div",{className:"featuredprice",children:["Price: ",t.price]}),Object(d.jsxs)("div",{className:"featureddescription",children:["Description: ",t.description]}),Object(d.jsxs)("div",{className:"featuredlocation",children:["Location: ",t.location]}),Object(d.jsx)("button",{className:"replybtn",onClick:function(){r(!0),u(t._id),m(t.author.username),v(t.title),console.log(O),console.log(f)},children:"Reply"}),Object(d.jsx)("button",{className:"logOutBtn",onClick:function(){S()},children:"LogOut"}),i?Object(d.jsx)(p,{clickedMessage:i,renderMessageForm:r,postId:j,recipientUsername:O,recipientTitle:f}):null]},"featuredresult")]})})},g=function(e){var t=e.myPostTitle,s=e.setWantsToEdit,a=(e.wantsToEdit,e.postId),i=localStorage.getItem("token"),r=Object(c.useState)(""),o=Object(n.a)(r,2),l=o[0],j=o[1],u=Object(c.useState)(""),b=Object(n.a)(u,2),h=b[0],O=b[1],p=Object(c.useState)(""),m=Object(n.a)(p,2),g=m[0],x=m[1],f=Object(c.useState)(""),v=Object(n.a)(f,2),N=v[0],k=v[1],S=Object(c.useState)(!1),T=Object(n.a)(S,2),C=T[0],y=T[1];return console.log(a),Object(d.jsx)(d.Fragment,{children:Object(d.jsxs)("div",{className:"editpostform",children:[Object(d.jsxs)("h1",{className:"editposttext",children:["Edit Your Post: ",t]}),Object(d.jsx)("label",{className:"editnewtitle",children:"Title: "}),Object(d.jsx)("input",{className:"edittitleinput",type:"text",value:l,onChange:function(e){j(e.target.value)}}),Object(d.jsx)("label",{className:"editnewdescription",children:"Description: "}),Object(d.jsx)("input",{className:"editdescriptioninput",type:"text",value:h,onChange:function(e){O(e.target.value)}}),Object(d.jsx)("label",{className:"editnewprice",children:"Price: "}),Object(d.jsx)("input",{className:"editpriceinput",type:"text",value:g,onChange:function(e){x(e.target.value)}}),Object(d.jsx)("label",{className:"editnewlocation",children:"Location: "}),Object(d.jsx)("input",{className:"editlocationinput",type:"text",value:N,onChange:function(e){k(e.target.value)}}),Object(d.jsx)("label",{className:"editnewwilldeliver",children:"Will Deliver? :"}),Object(d.jsx)("input",{className:"editwilldeliverselection",type:"checkbox",value:C,onChange:function(e){return y(!0)}}),Object(d.jsx)("button",{className:"editbtn",onClick:function(){!function(e,t,s,n,c){fetch("https://strangers-things.herokuapp.com/api/2105-vpi-web-pt/posts/".concat(a),{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:"Bearer "+i},body:JSON.stringify({post:{title:e,description:t,price:s,location:n,willDeliver:c}})}).then((function(e){return e.json()})).then((function(e){console.log(e)}))}(l,h,g,N,C)},children:"Edit Post"}),Object(d.jsx)("button",{className:"canceleditbtn",onClick:function(){s(!1)},children:"Cancel"})]})})},x=function(e){var t=e.userToken,s=Object(c.useState)([]),a=Object(n.a)(s,2),i=a[0],r=a[1],o=Object(c.useState)(""),l=Object(n.a)(o,2),b=l[0],h=l[1],O=Object(c.useState)(""),p=Object(n.a)(O,2),m=p[0],x=p[1],f=Object(c.useState)(""),v=Object(n.a)(f,2),N=v[0],k=v[1],S=Object(c.useState)(""),T=Object(n.a)(S,2),C=T[0],y=T[1],I=Object(c.useState)(!1),w=Object(n.a)(I,2),P=w[0],L=w[1],E=Object(c.useState)(!1),F=Object(n.a)(E,2),M=F[0],B=F[1],A=Object(c.useState)(""),U=Object(n.a)(A,2),R=U[0],D=U[1],W=Object(c.useState)(""),V=Object(n.a)(W,2),z=V[0],J=V[1];return Object(c.useEffect)((function(){(function(){var e=Object(u.a)(j.a.mark((function e(){var s,n,c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://strangers-things.herokuapp.com/api/2105-VPI-WEB-PT/users/me",{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+t}});case 2:return s=e.sent,e.next=5,s.json();case 5:n=e.sent,c=n.data.posts,r(c);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),Object(d.jsx)(d.Fragment,{children:Object(d.jsxs)("div",{className:"allmyposts",children:[Object(d.jsxs)("div",{className:"myposts",children:[Object(d.jsx)("h1",{children:"POSTLIST"}),i.map((function(e){return Object(d.jsxs)("div",{children:[Object(d.jsxs)("div",{className:"usertitle",children:[" Title: ",e.title," "]}),Object(d.jsxs)("div",{className:"userdescription",children:[" Description: ",e.description,"  "]}),Object(d.jsxs)("div",{className:"userprice",children:[" Price: ",e.price,"  "]}),Object(d.jsxs)("div",{className:"userlocation",children:[" Location: ",e.location]}),Object(d.jsx)("button",{className:"usereditbtn",onClick:function(){B(!0),console.log(e._id),D(e.title),J(e._id)},children:"Edit"}),Object(d.jsx)("button",{className:"userdeletebtn",onClick:function(){J(e._id),fetch("https://strangers-things.herokuapp.com/api/2105-vpi-web-pt/posts/".concat(z),{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer "+t}}).then((function(e){return e.json()})).then((function(e){console.log(e)}))},children:"Delete"})]},e._id)}))]}),M?Object(d.jsx)(g,{myPostTitle:R,wantsToEdit:M,setWantsToEdit:B,postId:z}):null,Object(d.jsxs)("div",{className:"newpost",children:[Object(d.jsx)("h1",{className:"creatnewposttext",children:"CREATE NEW POST"}),Object(d.jsx)("label",{className:"newtitle",children:"Title"}),Object(d.jsx)("input",{className:"titleinput",type:"text",value:b,onChange:function(e){h(e.target.value)}}),Object(d.jsx)("label",{className:"newdescription",children:"Description"}),Object(d.jsx)("input",{className:"descriptioninput",type:"text",value:m,onChange:function(e){x(e.target.value)}}),Object(d.jsx)("label",{className:"newprice",children:"Price"}),Object(d.jsx)("input",{className:"priceinput",type:"text",value:N,onChange:function(e){k(e.target.value)}}),Object(d.jsx)("label",{className:"newlocation",children:"Location"}),Object(d.jsx)("input",{className:"locationinput",type:"text",value:C,onChange:function(e){y(e.target.value)}}),Object(d.jsx)("label",{className:"newwilldeliver",children:"Will Deliver :"}),Object(d.jsx)("input",{id:"willdeliverselection",type:"checkbox",onChange:function(e){L(!0)}}),Object(d.jsx)("button",{className:"createbtn",onClick:function(){!function(e,s,n,c,a){fetch("https://strangers-things.herokuapp.com/api/2105-vpi-web-pt/posts",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+t},body:JSON.stringify({post:{title:e,description:s,price:n,location:c,willDeliver:a}})}).then((function(e){return e.json()})).then((function(e){console.log(e)}))}(b,m,N,C,P)},children:"Create Post"})]})]})})},f=function(e){var t=Object(c.useState)(""),s=Object(n.a)(t,2),a=s[0],i=s[1],r=(e.clickedMessage,e.renderMessageForm),o=e.recipientUsername,l=e.recipientTitle,j=e.postId,u=localStorage.getItem("token");return Object(d.jsx)(d.Fragment,{children:Object(d.jsxs)("div",{className:"newmessageform",children:[Object(d.jsxs)("span",{children:["To: ",o,"  "]}),Object(d.jsx)("br",{}),Object(d.jsxs)("span",{children:["In Response to post: ",l," "]}),Object(d.jsx)("br",{}),Object(d.jsx)("br",{}),Object(d.jsx)("span",{children:"Message Body:"}),Object(d.jsx)("br",{}),Object(d.jsx)("input",{onChange:function(e){i(e.target.value),console.log(a)}}),Object(d.jsx)("button",{className:"send",onClick:function(){fetch("https://strangers-things.herokuapp.com/api/2105-VPI-WEB-PT/posts/".concat(j,"/messages"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+u},body:JSON.stringify({message:{content:a}})}).then((function(e){console.log(e)})).catch(console.error),r(!1)},children:"Send"}),Object(d.jsx)("button",{onClick:function(){r(!1)},children:"Cancel"})]})})},v=function(e){var t=e.userToken,s=Object(c.useState)([]),a=Object(n.a)(s,2),i=a[0],r=a[1],o=Object(c.useState)(!1),l=Object(n.a)(o,2),b=l[0],h=l[1],O=Object(c.useState)(""),p=Object(n.a)(O,2),m=p[0],g=p[1],x=Object(c.useState)(""),v=Object(n.a)(x,2),N=v[0],k=v[1],S=Object(c.useState)(""),T=Object(n.a)(S,2),C=T[0],y=T[1],I=Object(c.useState)(""),w=Object(n.a)(I,2),P=w[0],L=w[1];return Object(c.useEffect)((function(){(function(){var e=Object(u.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://strangers-things.herokuapp.com/api/2105-VPI-WEB-PT/users/me",{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)}}).then((function(e){return e.json()})).then((function(e){var t=e.data.username;L(t);var s=e.data.messages;r(s)}));case 2:e.sent;case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),Object(d.jsxs)(d.Fragment,{children:[Object(d.jsxs)("div",{className:"sendandreceived",children:[Object(d.jsxs)("div",{className:"received",children:[Object(d.jsx)("h1",{className:"mssgetext",children:"Messages"}),i.map((function(e,t){return Object(d.jsx)(d.Fragment,{children:Object(d.jsxs)("div",{className:"message",children:[Object(d.jsxs)("div",{className:"mssgusername",children:["From: ",e.fromUser.username]}),Object(d.jsxs)("div",{className:"mssgtitle",children:[" Title:",e.post.title," "]}),Object(d.jsxs)("div",{className:"mssgdescription",children:[" Body: ",e.content," "]}),e.fromUser.username===P?null:Object(d.jsx)("button",{className:"mssgreply",disabled:b,onClick:function(){g(e.post._id),console.log(m),k(e.fromUser.username),y(e.post.title),console.log(N),console.log(e.fromUser.username),h(!0)},children:"Reply"})]},t)})}))]}),Object(d.jsx)("div",{className:"newmessageformshow",children:b?Object(d.jsx)(f,{recipientUsername:N,recipientTitle:C,postId:m,setPostId:g,clickedMessage:b,renderMessageForm:h}):null})]})," "]})},N=function(e){var t=e.userToken,s=Object(c.useState)(),a=Object(n.a)(s,2),i=a[0],l=a[1];return Object(d.jsx)(r.a,{children:Object(d.jsxs)("div",{children:[Object(d.jsx)("img",{className:"logo",src:"https://placekitten.com/50/50"}),Object(d.jsxs)("nav",{className:"navi",children:[Object(d.jsx)("div",{className:"naviHome",children:Object(d.jsx)(r.b,{to:"/",children:"Home"})}),Object(d.jsx)("div",{className:"naviPost",children:Object(d.jsx)(r.b,{to:"/myposts",children:"My Posts"})}),Object(d.jsx)("div",{className:"naviMessage",children:Object(d.jsx)(r.b,{to:"/mymessages",children:"Messages"})})]}),Object(d.jsxs)(o.c,{children:[Object(d.jsx)(o.a,{path:"/myposts",children:Object(d.jsx)(x,{userToken:t})}),Object(d.jsxs)(o.a,{path:"/mymessages",children:[Object(d.jsx)(v,{userToken:t}),i?Object(d.jsx)(f,{clickedMessage:i,renderMessageForm:l,messageContent:messageContent,setContent:setContent}):null]}),Object(d.jsx)(o.a,{exact:!0,path:"/",children:Object(d.jsx)("div",{className:"welcome",children:"WELCOME TO SNAP ATTACK!!!"})})]})]})})},k=function(){var e=Object(c.useState)(!1),t=Object(n.a)(e,2),s=t[0],a=t[1],i=Object(c.useState)(""),l=Object(n.a)(i,2),j=l[0],u=l[1],p=Object(c.useState)(null),g=Object(n.a)(p,2),x=g[0],f=g[1],v=Object(c.useState)(!1),k=Object(n.a)(v,2),S=k[0],T=k[1],C=Object(c.useState)(!1),y=Object(n.a)(C,2),I=y[0],w=y[1];return Object(c.useEffect)((function(){localStorage.getItem("token")&&u(localStorage.getItem("token"))}),[j]),Object(d.jsxs)("div",{id:"app",children:[Object(d.jsxs)("div",{className:"rightAndLeftScreen",children:[Object(d.jsx)("div",{className:"PostsScreen",children:Object(d.jsx)(b,{isLoggedIn:s,setIsLoggedIn:a,userToken:j,setUserToken:u,featuredResult:x,setFeaturedResult:f,clickedMessage:S,renderMessageForm:T})}),Object(d.jsx)("div",{className:"rightviewport",children:Object(d.jsxs)(r.a,{children:[j?Object(d.jsx)(m,{featuredResult:x,setFeaturedResult:f,isLoggedIn:s,setIsLoggedIn:a,userToken:j,setUserToken:u,clickedMessage:S,renderMessageForm:T}):Object(d.jsx)(h,{isLoggedIn:s,setIsLoggedIn:a,userToken:j,setUserToken:u}),Object(d.jsx)("div",{className:"signup",children:s?Object(d.jsx)("h3",{children:"YOUR ARE LOGGED IN!"}):Object(d.jsx)("h3",{children:Object(d.jsx)(o.a,{children:I?Object(d.jsx)(O,{isLoggedIn:s,setIsLoggedIn:a,userToken:j,setUserToken:u}):Object(d.jsx)(r.b,{className:"registerbtn",onClick:function(){w(!0),console.log(I)},children:"New to Snap Attack? Sign up here!"})})})})]})})]}),Object(d.jsx)("div",{className:"profileandmessages",children:s&&j?Object(d.jsx)(N,{clickedMessage:S,renderMessageForm:T,setIsLoggedIn:a,isLoggedIn:a,setUserToken:u,userToken:j}):null})]})};i.a.render(Object(d.jsx)(k,{}),document.getElementById("app"))}},[[31,1,2]]]);
//# sourceMappingURL=main.b0f73cb3.chunk.js.map